!function(n){function t(c){if(r[c])return r[c].exports;var g=r[c]={i:c,l:!1,exports:{}};return n[c].call(g.exports,g,g.exports,t),g.l=!0,g.exports}var r={};t.m=n,t.c=r,t.i=function(n){return n},t.d=function(n,r,c){t.o(n,r)||Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:c})},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=1)}([function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction flattenData(dataArray, accessor) {\n  var _ref;\n\n  var nestedArray = dataArray.map(function (d) {\n    return d[accessor];\n  });\n  return (_ref = []).concat.apply(_ref, _toConsumableArray(nestedArray));\n}\n\nexports.default = flattenData;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9mbGF0dGVuRGF0YS5qcz9hZWFjIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGZsYXR0ZW5EYXRhIChkYXRhQXJyYXksIGFjY2Vzc29yKSB7XG4gIGNvbnN0IG5lc3RlZEFycmF5ID0gZGF0YUFycmF5Lm1hcChkID0+IHtcbiAgICByZXR1cm4gZFthY2Nlc3Nvcl1cbiAgfSlcbiAgcmV0dXJuIFtdLmNvbmNhdCguLi5uZXN0ZWRBcnJheSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgZmxhdHRlbkRhdGFcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBmbGF0dGVuRGF0YS5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _flattenData = __webpack_require__(0);\n\nvar _flattenData2 = _interopRequireDefault(_flattenData);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar d3 = window.d3;\n\nd3.renderVoronoi = function renderVoronoi(bind, jsonUrl, config) {\n  config = _extends({\n    img: null,\n    imgOpacity: 0.7,\n    radius: 5,\n    width: 800,\n    height: 600,\n    colorPoints: '#e4bd0b',\n    colorVoronoi: '#de3d83'\n  }, config);\n  var _config = config,\n      width = _config.width,\n      height = _config.height,\n      radius = _config.radius,\n      colorPoints = _config.colorPoints,\n      colorVoronoi = _config.colorVoronoi;\n\n\n  d3.json(jsonUrl, function (error, json) {\n    if (error) return console.warn(error);\n\n    var _data = (0, _flattenData2.default)(json.layers[0].paths, 'points').map(function (d) {\n      return { x: d[0], y: d[1] };\n    });\n    console.log('data', _data);\n    // render img\n    appendImg(config.img);\n    // render chart\n    points(bind, _data);\n  });\n\n  function appendImg(img) {\n    d3.select(bind).append('img').attr('src', img).style('position', 'fixed').style('z-index', '-2').style('top', 0).style('width', width + 'px').style('height', height + 'px').style('opacity', config.imgOpacity);\n  }\n\n  function points(bind, data) {\n    // create svg in passed in div\n    var selection = d3.select(bind).append('svg').attr('width', width).attr('height', height);\n\n    var voronoi = d3.voronoi().x(function (d) {\n      return d.x;\n    }).y(function (d) {\n      return d.y;\n    }).extent([[-1, -1], [width + 1, height + 1]]);\n\n    var point = selection.selectAll('g').data(data).enter().append('g').attr('class', function (d, i) {\n      return 'g g-' + i;\n    }).on('click', function (d) {\n      return console.log(d);\n    });\n\n    point.append('path').data(voronoi.polygons(data)).attr('d', renderCell).attr('class', 'voronoi').attr('id', function (d, i) {\n      return 'cell-' + i;\n    }).attr('stroke', colorVoronoi);\n\n    point.append('circle').attr('cx', function (d) {\n      return d.x;\n    }).attr('cy', function (d) {\n      return d.y;\n    }).attr('r', radius).style('fill', colorPoints);\n\n    function renderCell(d) {\n      return d == null ? null : 'M' + d.join('L') + 'Z';\n    }\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zY3JpcHQuanM/OWE5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZmxhdHRlbkRhdGEgZnJvbSAnLi9mbGF0dGVuRGF0YSdcbmNvbnN0IGQzID0gd2luZG93LmQzXG5cbmQzLnJlbmRlclZvcm9ub2kgPSBmdW5jdGlvbiByZW5kZXJWb3Jvbm9pIChiaW5kLCBqc29uVXJsLCBjb25maWcpIHtcbiAgY29uZmlnID0ge1xuICAgIGltZzogbnVsbCxcbiAgICBpbWdPcGFjaXR5OiAwLjcsXG4gICAgcmFkaXVzOiA1LFxuICAgIHdpZHRoOiA4MDAsXG4gICAgaGVpZ2h0OiA2MDAsXG4gICAgY29sb3JQb2ludHM6ICcjZTRiZDBiJyxcbiAgICBjb2xvclZvcm9ub2k6ICcjZGUzZDgzJyxcbiAgICAuLi5jb25maWdcbiAgfVxuICBjb25zdCB7IHdpZHRoLCBoZWlnaHQsIHJhZGl1cywgY29sb3JQb2ludHMsIGNvbG9yVm9yb25vaSB9ID0gY29uZmlnXG5cbiAgZDMuanNvbihqc29uVXJsLCBmdW5jdGlvbiAoZXJyb3IsIGpzb24pIHtcbiAgICBpZiAoZXJyb3IpIHJldHVybiBjb25zb2xlLndhcm4oZXJyb3IpXG5cbiAgICBjb25zdCBfZGF0YSA9IGZsYXR0ZW5EYXRhKGpzb24ubGF5ZXJzWzBdLnBhdGhzLCAncG9pbnRzJylcbiAgICAgIC5tYXAoZCA9PiB7IHJldHVybiB7eDogZFswXSwgeTogZFsxXX0gfSlcbiAgICBjb25zb2xlLmxvZygnZGF0YScsIF9kYXRhKVxuICAgIC8vIHJlbmRlciBpbWdcbiAgICBhcHBlbmRJbWcoY29uZmlnLmltZylcbiAgICAvLyByZW5kZXIgY2hhcnRcbiAgICBwb2ludHMoYmluZCwgX2RhdGEpXG4gIH0pXG5cbiAgZnVuY3Rpb24gYXBwZW5kSW1nIChpbWcpIHtcbiAgICBkMy5zZWxlY3QoYmluZClcbiAgICAgIC5hcHBlbmQoJ2ltZycpXG4gICAgICAuYXR0cignc3JjJywgaW1nKVxuICAgICAgLnN0eWxlKCdwb3NpdGlvbicsICdmaXhlZCcpXG4gICAgICAuc3R5bGUoJ3otaW5kZXgnLCAnLTInKVxuICAgICAgLnN0eWxlKCd0b3AnLCAwKVxuICAgICAgLnN0eWxlKCd3aWR0aCcsIHdpZHRoICsgJ3B4JylcbiAgICAgIC5zdHlsZSgnaGVpZ2h0JywgaGVpZ2h0ICsgJ3B4JylcbiAgICAgIC5zdHlsZSgnb3BhY2l0eScsIGNvbmZpZy5pbWdPcGFjaXR5KVxuICB9XG5cbiAgZnVuY3Rpb24gcG9pbnRzIChiaW5kLCBkYXRhKSB7XG4gICAgLy8gY3JlYXRlIHN2ZyBpbiBwYXNzZWQgaW4gZGl2XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gZDMuc2VsZWN0KGJpbmQpXG4gICAgICAuYXBwZW5kKCdzdmcnKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgd2lkdGgpXG4gICAgICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0KVxuXG4gICAgY29uc3Qgdm9yb25vaSA9IGQzLnZvcm9ub2koKVxuICAgICAgLngoZCA9PiBkLngpXG4gICAgICAueShkID0+IGQueSlcbiAgICAgIC5leHRlbnQoW1xuICAgICAgICAgIFstMSwgLTFdLFxuICAgICAgICAgIFt3aWR0aCArIDEsIGhlaWdodCArIDFdXG4gICAgICBdKVxuXG4gICAgY29uc3QgcG9pbnQgPSBzZWxlY3Rpb24uc2VsZWN0QWxsKCdnJylcbiAgICAgIC5kYXRhKGRhdGEpXG4gICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgKGQsIGkpID0+ICdnIGctJyArIGkpXG4gICAgICAub24oJ2NsaWNrJywgZCA9PiBjb25zb2xlLmxvZyhkKSlcblxuICAgIHBvaW50LmFwcGVuZCgncGF0aCcpXG4gICAgICAuZGF0YSh2b3Jvbm9pLnBvbHlnb25zKGRhdGEpKVxuICAgICAgLmF0dHIoJ2QnLCByZW5kZXJDZWxsKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ3Zvcm9ub2knKVxuICAgICAgLmF0dHIoJ2lkJywgKGQsIGkpID0+ICdjZWxsLScgKyBpKVxuICAgICAgLmF0dHIoJ3N0cm9rZScsIGNvbG9yVm9yb25vaSlcblxuICAgIHBvaW50LmFwcGVuZCgnY2lyY2xlJylcbiAgICAgIC5hdHRyKCdjeCcsIGQgPT4gZC54KVxuICAgICAgLmF0dHIoJ2N5JywgZCA9PiBkLnkpXG4gICAgICAuYXR0cigncicsIHJhZGl1cylcbiAgICAgIC5zdHlsZSgnZmlsbCcsIGNvbG9yUG9pbnRzKVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyQ2VsbCAoZCkge1xuICAgICAgcmV0dXJuIGQgPT0gbnVsbCA/IG51bGwgOiAnTScgKyBkLmpvaW4oJ0wnKSArICdaJ1xuICAgIH1cbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNjcmlwdC5qcyJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUtBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n")}]);